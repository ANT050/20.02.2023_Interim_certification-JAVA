<a id="return"></a>

<center>

# Промежуточная аттестация

## Урок 2. Магазин игрушек (Java)

</center>

---

**Необходимо написать программу – розыгрыша игрушек в магазине детских товаров.**

**Стараемся применять ООП и работу с файлами.**

*Если какой-то пункт не изучали и не знаете, как сделать, то можете сделать своим способом. Например, у кого в курсе не было ООП, то применяем списки\массивы\словари.*

**Желательный функционал программы:**

>- В программе должен быть минимум один класс со следующими свойствами:
>>- id игрушки;
>>- текстовое название;
>>- количество;
>>- частота выпадения игрушки (вес в % до 100)
>- Метод добавление новых игрушек и возможность изменения веса (частоты выпадения игрушки)
>- Возможность организовать розыгрыш игрушек

*Например, следующим образом:*

С помощью метода выбора призовой игрушки – мы получаем эту призовую игрушку и записываем в список\массив.
Это список призовых игрушек, которые ожидают выдачи.
Еще у нас должен быть метод – получения призовой игрушки.
После его вызова – мы удаляем из списка\массива первую игрушку и сдвигаем массив. А эту игрушку записываем в текстовый файл.

Не забываем уменьшить количество игрушек.

К написанию программы можно подойти более творчески и делать так, как Вы поняли задание. Немного менять и отходить от примера выше.

---

### Оглавление

- [Главное меню приложения для розыгрыша игрушек в магазине детских товаров:](#Main "Главное меню приложения для розыгрыша игрушек в магазине детских товаров")
- [Отобразите весь список игрушек:](#Список_всех_игрушек "Отобразите весь список игрушек")
- [Отобразить список разыгранных игрушек:](#Список_разыгранных_игрушек "Отобразить список разыгранных игрушек")
- [Добавьте новую игрушку в список:](#Add_toys "Добавьте новую игрушку в список")
- [Удалить игрушку из списка:](#Remove_toys "Удалить игрушку из списка")

---

<a id="Main"></a>

### **Главное меню приложения для розыгрыша игрушек в магазине детских товаров:**

Файл Main.java:

Выводит пользователю меню и выполняет различные действия, которые пользователь выбирает.

scanner - позволяет считывать входные данные от пользователя через интерфейс командной строки..

menuItems - переменная пунктов меню, представляет собой список типа String, который хранит список пунктов меню в виде строк. 

Меню отображается пользователю с помощью цикла, который перебирает список пунктов меню и выводит каждый пункт с соответствующим номером. Пользователю предлагается ввести номер, программа выполняет действие, которое выбрал пользователь, используя switch. Проверяется правильность ввода, чтобы это было число. Цикл выбора будет продолжаться до тех пор, пока пользователь не выберет "Выход".

Если пользователь выбирает "Отобразите весь список игрушек", вызывается метод displayToyList из класса OutputTablesToys.

Если пользователь выбирает "Отобразить список разыгранных игрушек", вызывается метод displayParticipatingToys из класса OutputTablesToys.

Если пользователь выбирает "Добавьте новую игрушку в список", вызывается метод addNewToy из класса AddToys.

Если пользователь выбирает "Удалить игрушку из списка", вызывается метод displayToyList из класса OutputTablesToys для вывода списка игрушек, после чего вызывается метод removeToyById из класса RemoveToy.

Если пользователь выбирает "Изменить данные игрушки", вызывается метод modifyToyById из класса ToyModifier, так же обрабатывается исключение "Произошла ошибка при изменении данных: ".

Если пользователь выбирает "Начать игру" (Начать игру), вызывается метод start из класса Game.

***В консоли это выглядит следующим образом:***

#### **Главное меню приложения:**

<img src="images\Main(1).jpg" height="228" width="363"/>

#### **Выход:**

<img src="images\Main(2).jpg" height="145" width="385"/>

#### **Ошибки при вводе числа:**

<img src="images\Main(3).jpg" height="364" width="505"/>

:point_right: [Вначало](#return "Вернуться вначало")

---

<a id="Список_всех_игрушек"></a>

<a id="Список_разыгранных_игрушек"></a>

### **Пункт меню отобразите весь список игрушек**

### **Пункт меню отобразить список разыгранных игрушек**

OutputTablesToys.java - используюется для чтения и отображения данных, которые хранятся в файлах toys.csv и played.csv.

Константы TOY_LIST и PARTICIPATING_TOYS хранят имена CSV-файлов, которые содержат данные игрушек.

Метод displayToyList() считывает файл "toys.csv", разбивает каждую строку по зяпятым, далее выводит данные игрушки в форматированном виде.

Метод displayParticipatingToys() считывает файл "played.csv", разбивает каждую строку по запятым, далее выводит данные игрушки в форматированном виде.

***В консоли это выглядит следующим образом:***

#### **Отобразите весь список игрушек:**

<img src="images\list_of_all_toys.jpg" height="258" width="420"/>

#### **Отобразить список разыгранных игрушек:**

<img src="images\list_of_dropped_toys.jpg" height="193" width="425"/>

:point_right: [Вначало](#return "Вернуться вначало")

---

<a id="Add_toys"></a>

### **Пункт меню добавления новой игрушки в список**

AddToys.java - добавление новых игрушек в файл "toys.csv" с проверкой корректности введенных данных и учетом общего процента выпадения игрушек.

Чтение содержимого файла "toys.csv" с помощью объекта Scanner.

lastID - разбиение каждой строки на отдельные поля, извлечение из поля с индексом 0 числа и сохранение его в переменной.

totalPercent - извлечение из поля с индексом 3 значение процентов и сохранение их в переменной, после того как удаляется символ процента из строки методом replace().

newID - новый ID, который будет на 1 больше последнего.

name - пользователь вводит новое название игрушки, считывается введенная строка пользователем и сохраняется в переменную.

quantity - количество игрушек.

validQuantity - используется для проверки правильности ввода. Если пользователь ввел корректное число, переменной присваивается "true".

Запускается цикл while, который будет продолжаться до тех пор, пока переменная validQuantity равна "false". Пользователь вводит новое количество игрушек. Если пользователь ввел корректное число, то это число считывается с помощью scanner.nextInt() и сохраняется в переменную quantity. Переменной validQuantity" присваивается true, цикла while завершается.Если пользователь ввел не корректное число или символы, то программа перейдет к блоку else и в консоле выводится сообщение "Неверный ввод. Пожалуйста, введите число!".

percent - процент выпадания.

validPercent - используется для проверки правильности ввода числа. Если пользователь ввел корректное число, переменной присваивается "true".

Запускается цикл while, который будет продолжаться до тех пор, пока переменная validPercent равна "false". Пользователь вводит новое количество процента выпадения новой игрушки. Если пользователь ввел корректное число, то это число считывается с помощью scanner.nextDouble() и сохраняется в переменную percent. Далее выполняется проверка, что введенное пользователем число percent находится в диапазоне от 0.01 до (100 минус общий процент выпадения игрушек (переменная totalPercent)). Если это условие выполняется, то переменная validPercent устанавливается в true, что приводит к завершению цикла while. Если пользователь ввел число, но оно за рамками диапазона, то выводится сообщение об ошибке, которое сообщает пользователю, какой диапазон допустимых значений. Программа завершает работу. Если пользователь ввел не корректное число или символы, то программа перейдет к блоку else и в консоле выводится сообщение "Неверный ввод. Пожалуйста, введите число!", пользователь повторяет попытку ввода.

formattedPercent - форматирование процента выпадения игрушки в строку с добавлением символа процента.

Открывается FileWriter, который дописывает новую строку в конец файла. Для этого используется write(), который форматирует строку с помощью метода String.format() и записывает ее в файл. Выводится сообщение о том, что новая игрушка добавлена в список.

***В консоли это выглядит следующим образом:***

#### **Добавление новой игрушки в файл:**

<img src="images\add_toys(1).jpg" height="640" width="539"/>

#### **Ошибки при вводе числа:**

<img src="images\add_toys(2).jpg" height="475" width="534"/>

:point_right: [Вначало](#return "Вернуться вначало")

---

<a id="Remove_toys"></a>

### **Пункт меню удаления игрушки из списка**

RemoveToy.java - реализует удаление записи об игрушке из файла toys.csv по ID игрушки.

Считывается файл toys.csv и его записи в список records. Пользователь вводит ID игрушки, которую нужно удалить, осуществляется проверка на корректность ввода. Если ввод корректен, то осуществляется проход по списку records и поиск записи с указанным ID. Если запись найдена, то она удаляется из списка records. Далее происходит обновление списка updatedRecords, присваивание новых ID, чтобы все ID были по порядку и запись обновленных данных в тот файл toys.csv. Если запись не была найдена, выводится сообщение об ошибке.

***В консоли это выглядит следующим образом:***

#### **Удаление игрушки из файла:**

<img src="images\remove_toy(1).jpg" height="637" width="425"/>

#### **Ошибки при вводе числа:**

<img src="images\remove_toy(2).jpg" height="450" width="381"/>

:point_right: [Вначало](#return "Вернуться вначало")

---

:point_right: [Вначало](#return "Вернуться вначало")

---
